<?xml version="1.0"?>
<PropertyList>
    <name>autopilot</name>
    <layout>vbox</layout>
    
    <group>
        <layout>hbox</layout>
        <empty>
            <stretch>1</stretch>
        </empty>
        
        <text>
            <label>Autopilot</label>
        </text>
        
        <empty>
            <stretch>1</stretch>
        </empty>
        
        <button>
            <pref-width>16</pref-width>
            <pref-height>16</pref-height>
            <legend></legend>
            <default>1</default>
            <keynum>27</keynum>
            <border>2</border>
            <binding>
                <command>dialog-close</command>
            </binding>
            <binding>
                <command>dialog-apply</command>
            </binding>
        </button>
    </group>
    <hrule/>
    <group>
        <layout>hbox</layout>
        <default-padding>8</default-padding>
        <group>
            <layout>vbox</layout>
            <text>
                <label>Autothrottle</label>
                <halign>center</halign>
            </text>
            <checkbox>
                <label>engage</label>
                <live>true</live>
                <property>/controls/autoflight/autothrottle-engage</property>
                <binding>
                    <command>property-toggle</command>
                    <property>/controls/autoflight/autothrottle-engage</property>
                </binding>
            </checkbox>
            <button>
                <legend>ALT HOLD</legend>
                <binding>
                    <command>property-assign</command>
                    <property>/controls/autoflight/autothrottle-mode</property>
                    <value>0</value>
                </binding>
            </button>
            <button>
                <legend>AGL HOLD</legend>
                <binding>
                    <command>property-assign</command>
                    <property>/controls/autoflight/autothrottle-mode</property>
                    <value>1</value>
                </binding>
            </button>
            <button>
                <legend>V/S HOLD</legend>
                <binding>
                    <command>property-assign</command>
                    <property>/controls/autoflight/autothrottle-mode</property>
                    <value>2</value>
                </binding>
            </button>
            <button>
                <legend>IAS HOLD</legend>
                <binding>
                    <command>property-assign</command>
                    <property>/controls/autoflight/autothrottle-mode</property>
                    <value>3</value>
                </binding>
            </button>
        </group>
        <vrule/>
        <group>
            <layout>vbox</layout>
            <text>
                <label>Autopilot</label>
                <halign>center</halign>
            </text>
            <checkbox>
                <label>engage</label>
                <live>true</live>
                <property>/controls/autoflight/autopilot/engage</property>
                <binding>
                    <command>property-toggle</command>
                    <property>/controls/autoflight/autopilot/engage</property>
                </binding>
            </checkbox>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>vbox</layout>
                    <button>
                        <legend>ALT HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/vertical-mode</property>
                            <value>0</value>
                        </binding>
                    </button>
                    <button>
                        <legend>AGL HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/vertical-mode</property>
                            <value>1</value>
                        </binding>
                    </button>
                    <button>
                        <legend>V/S HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/vertical-mode</property>
                            <value>2</value>
                        </binding>
                    </button>
                    <button>
                        <legend>IAS HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/vertical-mode</property>
                            <value>3</value>
                        </binding>
                    </button>
                </group>
                <group>
                    <layout>vbox</layout>
                    <button>
                        <legend>HDG HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/lateral-mode</property>
                            <value>0</value>
                        </binding>
                    </button>
                    <button>
                        <legend>V/S HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/lateral-mode</property>
                            <value>1</value>
                        </binding>
                    </button>
                    <button>
                        <legend>IAS HOLD</legend>
                        <binding>
                            <command>property-assign</command>
                            <property>/controls/autoflight/lateral-mode</property>
                            <value>2</value>
                        </binding>
                    </button>
                </group>
            </group>
        </group>
    </group>
    <hrule/>
    <group>
        <layout>hbox</layout>
        <default-padding>8</default-padding>
        <group>
            <layout>vbox</layout>
            <text>
                <label>SPEED</label>
            </text>
            <input>
                <property>/controls/autoflight/speed-select</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <button>
                <legend>SYNC</legend>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop('/controls/autoflight/speed-select',
                            math.round(getprop('/instrumentation/airspeed-indicator/indicated-speed-kt')));
                    </script>
                </binding>
            </button>
        </group>
        <vrule/>
        <group>
            <layout>vbox</layout>
            <text>
                <label>HDG</label>
            </text>
            <input>
                <property>/controls/autoflight/heading-select</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <button>
                <legend>SYNC</legend>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop('/controls/autoflight/heading-select',
                            math.floor(
                                math.periodic(1, 361, getprop('/orientation/heading-deg') + 0.5)));
                    </script>
                </binding>
            </button>
        </group>
        <vrule/>
        <group>
            <layout>vbox</layout>
            <text>
                <label>V/S</label>
            </text>
            <input>
                <property>/controls/autoflight/vertical-speed-select</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <button>
                <legend>SYNC</legend>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop('/controls/autoflight/vertical-speed-select',
                            math.round(getprop('/instrumentation/pfd/vs-fpm'), 10));
                    </script>
                </binding>
            </button>
        </group>
        <vrule/>
        <group>
            <layout>vbox</layout>
            <text>
                <label>ALT</label>
            </text>
            <input>
                <property>/controls/autoflight/altitude-select</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <button>
                <legend>SYNC</legend>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop('/controls/autoflight/altitude-select',
                            math.round(getprop('/instrumentation/altimeter/indicated-altitude-ft'), 100));
                    </script>
                </binding>
            </button>
        </group>
        <group>
            <layout>vbox</layout>
            <text>
                <label>AGL</label>
            </text>
            <input>
                <property>/controls/autoflight/agl-select</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <button>
                <legend>SYNC</legend>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop('/controls/autoflight/agl-select',
                            math.max(0,
                                math.round(getprop('/position/gear-agl-ft'), 10)));
                    </script>
                </binding>
            </button>
        </group>
    </group>
    
    <hrule/>
    
    <button>
        <legend>Close</legend>
        <default>true</default>
        <key>Esc</key>
        <binding>
            <command>dialog-close</command>
        </binding>
    </button>
    
</PropertyList>
